@model ProductCards_VM

<div class="filters-content">
    <div class="row grid">
        @{
            int count = 0;
            int count2 = 0;

        }
        @foreach (var menu in Model.Menus)
        {

            int[] selectedProductsIDs = new int[(menu.FoodCount + menu.BeverageCount + menu.SauceCount)];
            count2++;
            string menuModal = $"{menu.MenuName}" + count2;
            string menuModalTitle = $"{menu.MenuName}Title" + count2;
            string menuOrderCount = "menuOrderCount" + count2;
            string menuType = "menuType" + count2;
            <div class="modal fade" id="@menuModal" tabindex="-1" aria-labelledby="menuModalTitle" style="display: none;" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="menuModalTitle">@menu.MenuName Menu</h1>
                            <button type="button" class="btn-close bg-danger" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="px-5">
                            <div class="modal-body">
                                @{
                                    int foodCount = 0;
                                    int beverageCount = 0;
                                    int souceCount = 0;
                                    int productCount = 0;
                                }
                                <div>
                                    @for (int i = 0; i < menu.FoodCount; i++)
                                    {
                                        productCount++;
                                        SelectList menuFoodList = new SelectList(Model.FindMenuListByCategory(menu, "Food"), "ID", "ProductName");
                                        foodCount++;
                                        <label> Sauce @foodCount</label>
                                        <select name="menuCartElement" asp-items="menuFoodList" class="my-3">
                                            <option value="0">Select Food...</option>
                                        </select>
                                    }
                                    @for (int i = menu.FoodCount; i < (menu.FoodCount + menu.BeverageCount); i++)
                                    {
                                        productCount++;
                                        SelectList menuBeverageList = new SelectList(Model.FindMenuListByCategory(menu, "Beverage"), "ID", "ProductName");
                                        beverageCount++;
                                        <label> Sauce @beverageCount</label>
                                        <select name="menuCartElement" asp-items="menuBeverageList" class="my-3">
                                            <option value="0">Select Beverage...</option>
                                        </select>
                                    }
                                    @for (int i = (menu.FoodCount + menu.BeverageCount); i < (menu.FoodCount + menu.BeverageCount + menu.SauceCount); i++)
                                    {
                                        productCount++;
                                        SelectList menuSauceList = new SelectList(Model.FindMenuListByCategory(menu, "Sauce"), "ID", "ProductName");
                                        souceCount++;
                                        <label> Sauce @souceCount</label>
                                        <select name="menuCartElement" asp-items="menuSauceList" class="my-3">
                                            <option value="0">Select Sauce...</option>
                                        </select>
                                    }
                                    <select id="@menuType" class="my-3">
                                        <option value="0">Select Sauce...</option>
                                        <option value="1">Small</option>
                                        <option value="2">Medium</option>
                                        <option value="3">Large</option>
                                    </select>
                                    <input type="number" id="@menuOrderCount" value="1" />
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                                <button class=" border-0 bg-white">
                                    <a onclick="AddMenuToShoppingCart(@menu.ID,@count2)" class="btn btn-success text-white">Confirm</a>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            @*MenuCart*@
            count++;
            string elementAmount = "elementAmount" + count;
            <div class="col-sm-6 col-lg-4 all burger">
                <div class="box">
                    <div>
                        <div class="img-box">
                            <img src="https://i.hizliresim.com/m20yfy8.png" alt="">
                        </div>
                        <div class="detail-box">
                            <h5>
                                @menu.MenuName
                            </h5>

                            <p>
                                Veniam debitis quaerat officiis quasi cupiditate quo, quisquam velit, magnam voluptatem repellendus sed eaque
                            </p>
                            <div class="options">
                                <h6>
                                    $@menu.MenuPrice
                                </h6>

                                @if (ViewBag.Role == "Admin")
                                {
                                    <a vlass="btn btn-warning">Edit</a>
                                }
                                else if (ViewBag.Role == "User")
                                {
                                        <div class="d-flex justify-content-end">
                                    <a class="btn" data-bs-toggle="modal" data-bs-target="#@menuModal"> 
                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">

                                            <g>
                                            <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                            c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z">
                                                    </path>
                                                    </g>

                                            <g>
                                            <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                            C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                            c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                            C457.728,97.71,450.56,86.958,439.296,84.91z">
                                                    </path>

                                                    </g>

                                            <g>
                                            <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                            c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z">
                                                    </path>

                                                    </g>

                                                    </svg>
                                        </a>
                                        </div>
                                    
                                }
                                else
                                {

                                }

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        @foreach (var product in Model.Products)
        {
            count++;
            string elementAmount = "elementAmount" + count;
            <div class="col-sm-6 col-lg-4 all burger">
                <div class="box">
                    <div>
                        <div class="img-box">
                            <img src="https://i.hizliresim.com/m20yfy8.png" alt="">
                        </div>
                        <div class="detail-box">
                            <h5>
                                @product.ProductName
                            </h5>

                            <p>
                                Veniam debitis quaerat officiis quasi cupiditate quo, quisquam velit, magnam voluptatem repellendus sed eaque
                            </p>
                            <div class="options">
                                <h6>
                                    $@product.ProductPrice
                                </h6>
                                @if (ViewBag.Role == "Admin")
                                {
                                    <a vlass="btn btn-warning">Edit</a>
                                }
                                else if (ViewBag.Role == "User")
                                {
                                    <div class="d-flex justify-content-end">
                                        <input id="@elementAmount" class="bg-white w-25 mx-2" type="number" value="1" />

                                        <a class="mx-2 btn" onclick="AddToShoppingCart(@product.ID,'Product',@count)">

                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">

                                            <g>
                                            <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                                                     c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z">
                                                                                            </path>
                                                                                        </g>

                                            <g>
                                            <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                                                    C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                                                    c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                                                    C457.728,97.71,450.56,86.958,439.296,84.91z">
                                                                                             </path>

                                                                                        </g>

                                            <g>
                                            <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                                                     c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z">
                                                                                            </path>

                                                                                        </g>

                                                                            </svg>
                                        </a>
                                    </div>
                                }
                                else
                                {

                                }

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
